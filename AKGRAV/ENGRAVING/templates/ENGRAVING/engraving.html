{% extends "ENGRAVING/base.html" %}
{% load static %}

{% block content %}
<div class="workWeapons">
  <div class="a3D-panel">
      <canvas id="canvasForModels"></canvas>
  </div>
  <div class="changer_outfit">
    <div class="block_of_changer_outfit">
      <ul>
        <li id="el_of_block_of_changer_outfit">
          <h3 id="name_of_type_of_changer_outfit" onclick="ShowElementsCO(0)">Цвета</h3>
          <ul>
            <li id="el_of_changer_outfit">красный</li>
            <li id="el_of_changer_outfit">синий</li>
            <li id="el_of_changer_outfit">зеленый</li>
          </ul>
        </li>
        <li id="el_of_block_of_changer_outfit">
          <h3 id="name_of_type_of_changer_outfit" onclick="ShowElementsCO(1)">Гравировка</h3>
          <ul>
            <li id="el_of_changer_outfit">какая-то</li>
            <li id="el_of_changer_outfit">какая-то</li>
            <li id="el_of_changer_outfit">какая-то</li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
  <div class="changer_weapons">
    <div class="switcher">
      <img src="{% static 'ENGRAVING/image/left-arrow.png' %}" id="left_arrow">
      <img src="{% static 'ENGRAVING/image/right-arrow.png' %}" id="right_arrow">
    </div>
    <div class="list_of_weapons">
      <p>1</p>
      <p>2</p>
      <p>3</p>
      <p>4</p>
      <p>5</p>
      <p>6</p>
      <p>7</p>
      <p>8</p>
    </div>
  </div>
</div>





<script type="text/javascript" src="{% static 'ENGRAVING/js/three.js' %}"></script>
<script type="text/javascript" src="{% static 'ENGRAVING/js/OrbitControls.js' %}"></script>
<script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/loaders/GLTFLoader.js"></script>
<script type="text/javascript" src="{% static 'ENGRAVING/js/main.js' %}"> </script>
<script>
"use strict";
let pannelW = document.querySelector(".changer_outfit");
let widthForPannel = window.innerWidth - (300 + (window.innerWidth/1.5));
let heightForPannel = window.innerHeight/1.5;
pannelW.style.width = String(widthForPannel) + "px";
pannelW.style.height = String(heightForPannel) + "px";
console.log(heightForPannel);

const loader = new THREE.GLTFLoader();
const scene = new THREE.Scene();
var widthW = window.innerWidth/1.5;
var heightW = window.innerHeight/1.5;

var b = document.querySelector("#canvasForModels");
const ratio = widthW / heightW
const camera = new THREE.PerspectiveCamera( 75, ratio, 0.1, 1000 );
var renderer = new THREE.WebGLRenderer({canvas:b});
renderer.setClearColor(0x00E7E7E7)

const path = '{% static 'ENGRAVING/models/ShotGunNaklejka.gltf' %}';

renderer.shadowMapEnabled = true;
renderer.setSize( widthW, heightW );
scene.add( new THREE.AxesHelper(500));
console.log(b);
camera.position.set(0,0,10);
  
var controls = new THREE.OrbitControls( camera,renderer.domElement );


const amlight = new THREE.AmbientLight(0xffffff,1);
const light1 = new THREE.SpotLight(0xffffff,4);
const light2 = new THREE.SpotLight(0xffffff,4);
light2.position.set(0,10,-20);
light2.castShadow = true;
light1.position.set(0,10,20);
light1.castShadow = true;
scene.add( light1,light2 );
scene.add(amlight);




loader.load(path, function ( gltf ) {
  gltf.scene.position.x=0
  scene.add( gltf.scene );

  // Render scene after assets have been added

}, function ( xhr ) {
  console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );
 
}, function ( error ) {
  console.log( 'An error happened' , path);
});
function animate() {
  controls.update();
  renderer.render(scene, camera);
  window.requestAnimationFrame(animate);
}
animate()
</script>
{% endblock %}