{% extends "ENGRAVING/base.html" %}
{% load static %}

{% block content %}
<div class="3D-panel">
    <canvas id="canvasForModels"></canvas>
</div>
<script type="text/javascript" src="{% static 'ENGRAVING/js/three.js' %}"></script>
<script type="text/javascript" src="{% static 'ENGRAVING/js/OrbitControls.js' %}"></script>
<script src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/loaders/GLTFLoader.js"></script>
<script>
"use strict";
const loader = new THREE.GLTFLoader();
const scene = new THREE.Scene();

var b = document.querySelector("#canvasForModels");
const ratio = window.innerWidth / window.innerHeight
const camera = new THREE.PerspectiveCamera( 75, ratio, 0.1, 1000 );
var renderer = new THREE.WebGLRenderer({canvas:b});
renderer.setClearColor(0x00E7E7E7)

const path = '{% static 'ENGRAVING/models/shotGun.gltf' %}';


renderer.setSize( window.innerWidth, window.innerHeight );
scene.add( new THREE.AxesHelper(500));
console.log(b);
camera.position.set(0,0,10);
  
var controls = new THREE.OrbitControls( camera,renderer.domElement );



const light1  = new THREE.DirectionalLight(0xFFFFFF,2);
const light2  = new THREE.DirectionalLight(0xFFFFFF,2);
light2.position.set(0,0,-30);
light2.target.position.set(0,0,0);
light1.position.set(0,0,30);
light1.target.position.set(0,0,0);
scene.add( light1, light1.target,light2,light2.target );

const helper1 = new THREE.DirectionalLightHelper(light1);
const helper2 = new THREE.DirectionalLightHelper(light2);
scene.add(helper1,helper2);


loader.load(path, function ( gltf ) {
  gltf.scene.position.x=0
  scene.add( gltf.scene );

  // Render scene after assets have been added

}, function ( xhr ) {
  console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );
 
}, function ( error ) {
  console.log( 'An error happened' , path);
});
function animate() {
  controls.update();
  renderer.render(scene, camera);
  window.requestAnimationFrame(animate);
}
animate()
</script>
{% endblock %}